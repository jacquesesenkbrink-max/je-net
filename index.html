<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mijn Life Dashboard</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">

    <script src="data.js"></script>

    <style>
        :root {
            --primary-color: #6c5ce7; 
            --glass-bg: rgba(255, 255, 255, 0.75);
            --text-dark: #2d3436;
            --text-light: #636e72;
        }

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            color: var(--text-dark);
            min-height: 100vh;
            
            /* Standaard: Natuurfoto */
            background: url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80') no-repeat center center fixed;
            background-size: cover;
            
            transition: background 0.5s ease;
            text-shadow: 0 1px 3px rgba(255,255,255,0.8); 
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 90vh;
            justify-content: center;
        }

        /* LOGIN */
        #login-screen {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 350px;
            width: 100%;
        }

        input {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            border: 2px solid #dfe6e9;
            border-radius: 12px;
            font-size: 16px;
            text-align: center;
            box-sizing: border-box;
            outline: none;
        }
        input:focus { border-color: var(--primary-color); }

        .btn-main {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.2s;
            width: 100%;
            text-shadow: none;
        }
        .btn-main:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3); }

        /* DASHBOARD */
        #dashboard { display: none; width: 100%; }

        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(10px);
            padding: 25px 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* KLOK & BEGROETING */
        .greeting-box {
            cursor: pointer;
            transition: transform 0.2s ease;
            position: relative;
            text-align: left;
            flex: 1;
            min-width: 250px;
        }

        .greeting-box:hover { transform: scale(1.01); }
        
        .greeting-box:hover::after {
            content: "Start Oefening ‚Üí";
            position: absolute;
            top: -10px;
            right: 10px;
            font-size: 0.7rem;
            color: var(--primary-color);
            font-weight: bold;
            background: white;
            padding: 4px 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-shadow: none;
        }

        #live-clock {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
            margin-bottom: 5px;
            letter-spacing: -1px;
            text-shadow: none;
        }
        #live-date {
            font-size: 0.95rem;
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 5px;
            text-transform: capitalize;
        }
        #greeting-text {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-light);
        }

        .quote { 
            font-style: italic; 
            color: var(--text-light); 
            font-size: 0.85rem; 
            margin-top: 15px; 
            border-left: 3px solid var(--primary-color);
            padding-left: 10px;
        }
        
        /* WEER & RADAR STIJLEN */
        .weather-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-top: 10px;
        }

        .weather-box {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.6);
            padding: 12px 20px;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            position: relative;
            z-index: 10;
            text-shadow: none;
        }

        .weather-box:hover { background: rgba(255, 255, 255, 0.9); }
        .weather-box i { font-size: 1.8rem; margin-right: 12px; color: #fdcb6e; }
        
        .weather-box i.fa-cloud-rain { color: #74b9ff; }
        .weather-box i.fa-snowflake { color: #dfe6e9; }
        .weather-box i.fa-bolt { color: #fab1a0; }
        .weather-box i.fa-smog { color: #b2bec3; }

        #radar-popup {
            display: none;
            position: absolute;
            top: 65px; 
            right: 0;
            background: white;
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 100;
            width: 280px;
            animation: fadeIn 0.3s ease;
            text-shadow: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #radar-popup iframe {
            width: 100%;
            border-radius: 10px;
            border: none;
            height: 280px;
        }

        /* TABS & GRID */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: rgba(255,255,255,0.6);
            border: none;
            padding: 10px 25px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-dark);
            transition: 0.3s;
            text-shadow: none;
        }

        .tab-btn.active {
            background: white;
            color: var(--primary-color);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            width: 100%;
        }

        .app-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: 0.3s;
            border: 1px solid rgba(255,255,255,0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1/1;
            text-shadow: none;
        }

        .app-card:hover {
            transform: translateY(-5px);
            background: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

        .app-icon { font-size: 2.2rem; color: var(--primary-color); margin-bottom: 15px; }
        .app-title { font-weight: 600; font-size: 1rem; color: var(--text-dark); }

        .footer-controls {
            margin-top: 40px;
            display: flex;
            gap: 15px;
        }
        .small-btn {
            background: rgba(0,0,0,0.3);
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            color: white;
            font-size: 0.8rem;
            backdrop-filter: blur(4px);
            text-shadow: none;
        }
        .small-btn:hover { background: rgba(0,0,0,0.5); }

        @media (max-width: 600px) {
            .header-section { flex-direction: column; text-align: center; align-items: center; }
            .greeting-box { text-align: center; width: 100%; }
            .app-grid { grid-template-columns: repeat(2, 1fr); }
            .weather-wrapper { align-items: center; width: 100%; }
            #radar-popup { right: auto; } 
        }
    </style>
</head>
<body>

    <div class="container">
        
        <div id="login-screen">
            <h2>üëã Welkom</h2>
            <p style="color:#636e72;">Je dashboard is vergrendeld.</p>
            <input type="password" id="passwordInput" placeholder="Wachtwoord" onkeyup="if(event.key === 'Enter') checkLogin()">
            <button class="btn-main" onclick="checkLogin()">Ontgrendelen</button>
            <p id="error-msg" style="color:red; display:none; margin-top:10px; font-size:0.9rem;">Verkeerde code</p>
        </div>

        <div id="dashboard">
            
            <div class="header-section">
                <div class="greeting-box" onclick="startPraxis()">
                    <div id="live-clock">00:00</div>
                    <div id="live-date">Laden...</div>
                    <div id="greeting-text">Goedemorgen, Jacques</div>
                    
                    <div id="quote-text" class="quote">...</div>
                </div>
                
                <div class="weather-wrapper">
                    <div class="weather-box" onclick="toggleRadar()">
                        <i class="fas fa-sun" id="weather-icon"></i>
                        <span id="weather-text">Laden...</span>
                        <i class="fas fa-chevron-down" style="font-size: 0.8rem; margin-left: 8px; opacity: 0.6;"></i>
                    </div>

                    <div id="radar-popup">
                        <h4 style="margin: 0 0 10px 0; color: #2d3436; font-size: 0.9rem;">üåßÔ∏è Buienradar NL</h4>
                        <iframe 
                            src="https://gadgets.buienradar.nl/gadget/zoommap/?lat=52.09&lng=5.12&overname=2&zoom=6&naam=Utrecht&size=2b&voor=1" 
                            scrolling="no" 
                            style="width:100%; height:280px; border:none; border-radius:10px;">
                        </iframe>
                        <div style="text-align: right; margin-top: 5px;">
                            <button onclick="toggleRadar()" style="background: #dfe6e9; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 0.8rem;">Sluiten</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('dagelijks', event)">Dagelijks</button>
                <button class="tab-btn" onclick="switchTab('meditatie', event)">Meditatie</button>
            </div>

            <div id="app-container" class="app-grid">
            </div>

            <div class="footer-controls">
                <button class="small-btn" onclick="toggleBackground()"><i class="fas fa-palette"></i> Pastel Kleuren</button>
                <button class="small-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Uitloggen</button>
            </div>
        </div>

    </div>

    <script>
        // --- VEILIGE LOGIN ---
        
        // DE CORRECTE HASH (GEKOPIEERD UIT JOUW DIAGNOSE SCHERM):
        const STORED_HASH = "c2ed12441a21c8045a0c466ca90b4454ac85cad01a504d35ed8c8c3945dc8924";

        // Check bij het laden of er al een actieve sessie is
        if(sessionStorage.getItem('dashboard_access') === 'valid') {
            document.addEventListener("DOMContentLoaded", () => {
                openDashboard();
            });
        }

        // Login functie
        function checkLogin() {
            const inputVal = document.getElementById('passwordInput').value;
            
            // Hash berekenen via de CryptoJS bibliotheek
            const inputHash = CryptoJS.SHA256(inputVal).toString();

            if(inputHash === STORED_HASH) {
                // Sla op in SESSIE
                sessionStorage.setItem('dashboard_access', 'valid');
                openDashboard();
            } else {
                // Foutmelding
                document.getElementById('error-msg').style.display = 'block';
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }

        function logout() {
            sessionStorage.removeItem('dashboard_access');
            location.reload();
        }

        window.onload = function() {
            if(document.getElementById('login-screen').style.display !== 'none') {
                 document.getElementById('passwordInput').focus();
            }
        };
        // --- EINDE LOGIN ---


        // JOUW APPS CONFIGURATIE
        const myApps = [
            { id: 1, cat: 'dagelijks', name: "Boodschappen", icon: "fa-shopping-basket", url: "Boodschappen-thuis.html" },
            { id: 2, cat: 'dagelijks', name: "Agenda Jacques en Anita", icon: "fa-calendar-day", url: "https://calendar.google.com" },
            { id: 9, cat: 'dagelijks', name: "Urenrooster Anita", icon: "fa-user-clock", url: "zorgbalans.html" },
            { id: 3, cat: 'dagelijks', name: "Taken", icon: "fa-check-double", url: "timemanagement v4.html" },
            
            { id: 10, cat: 'meditatie', name: "Meditatie Jacques", icon: "fa-spa", url: "praxis.html" },
            { id: 11, cat: 'meditatie', name: "Meditatie Anita", icon: "fa-leaf", url: "bijbelse-meditatie.html" },
            { id: 12, cat: 'meditatie', name: "Dialoog spel", icon: "fa-comments", url: "dedialoog v1.0.html" },
            { id: 13, cat: 'meditatie', name: "Meditatie Levy", icon: "fa-compass", url: "meditatie-reis.html" },
        ];

        let todaysQuoteId = 0; 
        
        let bgMode = 'photo';
        const natureImages = [
            "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80", 
            "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80", 
            "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
            "https://images.unsplash.com/photo-1519681393798-3828fb4090bb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80", 
            "https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80", 
            "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
        ];

        function openDashboard() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            startClock();
            setRandomQuote();
            fetchWeather();
            renderApps('dagelijks');
            
            if(bgMode === 'photo') {
                const randomImg = natureImages[Math.floor(Math.random() * natureImages.length)];
                document.body.style.background = `url('${randomImg}') no-repeat center center fixed`;
                document.body.style.backgroundSize = "cover";
            }
        }

        function startClock() {
            function update() {
                const now = new Date();
                document.getElementById('live-clock').innerText = now.toLocaleTimeString('nl-NL', {hour: '2-digit', minute:'2-digit'});
                const options = { weekday: 'long', day: 'numeric', month: 'long' };
                document.getElementById('live-date').innerText = now.toLocaleDateString('nl-NL', options);
                const uur = now.getHours();
                let tekst = "Goedennacht";
                if(uur >= 6) tekst = "Goedemorgen";
                if(uur >= 12) tekst = "Goedemiddag";
                if(uur >= 18) tekst = "Goedenavond";
                document.getElementById('greeting-text').innerText = tekst + ", Jacques";
            }
            update();
            setInterval(update, 1000);
        }

        function switchTab(category, event) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            if(event) {
                event.target.classList.add('active');
            }
            renderApps(category);
        }

        function renderApps(category) {
            const container = document.getElementById('app-container');
            container.innerHTML = '';
            const filteredApps = myApps.filter(app => app.cat === category);
            filteredApps.forEach(app => {
                const div = document.createElement('div');
                div.className = 'app-card';
                div.onclick = function() { 
                    if(app.type === 'alert') {
                        alert(app.msg);
                    } else {
                        const target = app.url.startsWith('http') ? '_blank' : '_self';
                        window.open(app.url, target);
                    }
                };
                div.innerHTML = `
                    <i class="fas ${app.icon} app-icon"></i>
                    <div class="app-title">${app.name}</div>
                `;
                container.appendChild(div);
            });
        }

        function setRandomQuote() {
            const todayStr = new Date().toDateString();
            const storedDate = localStorage.getItem('praxis_date');
            const storedId = localStorage.getItem('praxis_id');

            if (storedDate === todayStr && storedId !== null) {
                todaysQuoteId = parseInt(storedId);
            } else {
                if(typeof quotesData !== 'undefined') {
                    todaysQuoteId = Math.floor(Math.random() * quotesData.length);
                } else {
                    todaysQuoteId = 0; 
                }
                localStorage.setItem('praxis_date', todayStr);
                localStorage.setItem('praxis_id', todaysQuoteId);
            }

            if(typeof quotesData !== 'undefined') {
                const q = quotesData[todaysQuoteId];
                document.getElementById('quote-text').innerText = `"${q.quote}" - ${q.author}`;
            } else {
                document.getElementById('quote-text').innerText = '"Pluk de dag"';
            }
        }

        function startPraxis() {
            window.location.href = `praxis.html?id=${todaysQuoteId}`;
        }

        function toggleRadar() {
            const popup = document.getElementById('radar-popup');
            popup.style.display = (popup.style.display === 'block') ? 'none' : 'block';
        }

        document.addEventListener('click', function(event) {
            const wrapper = document.querySelector('.weather-wrapper');
            const popup = document.getElementById('radar-popup');
            if (popup.style.display === 'block' && !wrapper.contains(event.target)) {
                popup.style.display = 'none';
            }
        });

        async function fetchWeather() {
            try {
                const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=52.09&longitude=5.12&current_weather=true');
                const data = await response.json();
                
                const temp = Math.round(data.current_weather.temperature);
                const code = data.current_weather.weathercode;
                
                document.getElementById('weather-text').innerText = `${temp}¬∞C`;
                const iconElement = document.getElementById('weather-icon');
                
                iconElement.className = 'fas'; 
                
                if (code === 0) {
                    iconElement.classList.add('fa-sun'); 
                } else if (code >= 1 && code <= 3) {
                    iconElement.classList.add('fa-cloud-sun'); 
                } else if (code >= 45 && code <= 48) {
                    iconElement.classList.add('fa-smog'); 
                } else if (code >= 51 && code <= 67) {
                    iconElement.classList.add('fa-cloud-rain'); 
                } else if (code >= 71 && code <= 77) {
                    iconElement.classList.add('fa-snowflake'); 
                } else if (code >= 80 && code <= 82) {
                    iconElement.classList.add('fa-cloud-showers-heavy'); 
                } else if (code >= 85 && code <= 86) {
                    iconElement.classList.add('fa-snowflake'); 
                } else if (code >= 95) {
                    iconElement.classList.add('fa-bolt'); 
                } else {
                    iconElement.classList.add('fa-cloud'); 
                }
            } catch (e) {
                console.log("Weer fout:", e);
                document.getElementById('weather-text').innerText = "--";
                document.getElementById('weather-icon').classList.add('fa-exclamation-triangle');
            }
        }

        function toggleBackground() {
            const btn = document.querySelector('.footer-controls button'); 

            if(bgMode === 'photo') {
                document.body.style.background = "linear-gradient(120deg, #a18cd1 0%, #fbc2eb 100%)";
                document.body.style.backgroundSize = "200% 200%";
                document.body.style.animation = "gradientMove 15s ease infinite";
                bgMode = 'pastel';
                btn.innerHTML = '<i class="fas fa-image"></i> Natuurfoto\'s';
            } else {
                document.body.style.animation = 'none';
                const randomImg = natureImages[Math.floor(Math.random() * natureImages.length)];
                document.body.style.background = `url('${randomImg}') no-repeat center center fixed`;
                document.body.style.backgroundSize = "cover";
                bgMode = 'photo';
                btn.innerHTML = '<i class="fas fa-palette"></i> Pastel Kleuren';
            }
        }
    </script>
</body>

</html>


