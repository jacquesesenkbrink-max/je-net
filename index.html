<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="utf-8" />
    <title>Agenderingshulp PO Water</title>

    <!-- Basis layout en thema -->
    <link rel="stylesheet" type="text/css" href="styles.css" />

    <!-- Sortable.js voor drag & drop (later gebruikt in agenda's) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>

    <!-- Applicatiescripts -->
    <script type="text/javascript" src="api.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body>
    <div class="app-shell">

        <!-- Header / logo -->
        <header class="app-header">
            <div class="app-header-inner">
                <div class="app-logo-block">
                    <img src="assets/logowdodelta.png" alt="WDODelta logo" class="app-logo" />
                </div>
                <div class="app-title-block">
                    <h1 class="app-title">Agenderingshulp PO Water</h1>
                    <p class="app-subtitle">Programma Overleg Water — Waterschap Drents Overijsselse Delta</p>
                    <p class="app-role-indicator">
                        Rol: <span id="currentRoleLabel">Indiener</span>
                    </p>
                </div>
            </div>
        </header>

        <!-- Navigatie -->
        <nav class="app-nav">
            <ul class="app-nav-tabs">
                <li><button type="button" class="nav-tab nav-tab-active" data-view="view-start">Start</button></li>
                <li><button type="button" class="nav-tab" data-view="view-onderwerp">Onderwerp</button></li>
                <li><button type="button" class="nav-tab" data-view="view-termijnagenda">Termijnagenda</button></li>
                <li><button type="button" class="nav-tab" data-view="view-formeel">Formeel</button></li>
                <li><button type="button" class="nav-tab" data-view="view-informeel">Informeel</button></li>
                <li><button type="button" class="nav-tab" data-view="view-beheer">Beheer</button></li>
            </ul>
        </nav>

        <!-- Systeemmeldingen -->
        <div id="globalMessageBar" class="message-bar message-bar-hidden"></div>

        <!-- Hoofdcontent -->
        <main class="app-main">

            <!-- VIEW: Start -->
            <section id="view-start" class="app-view app-view-active">
                <div class="card">
                    <h2>Welkom bij de Agenderingshulp PO Water</h2>
                    <p>
                        Deze applicatie ondersteunt het aanmelden, beoordelen en plannen van strategische onderwerpen
                        voor het formele en informele Programma Overleg Water (PO Water).
                    </p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Onderwerp aanmelden</h3>
                        <p>
                            Beantwoord eerst de Agendawijzer en vul daarna het formulier in om een nieuw onderwerp aan te melden.
                        </p>
                        <button type="button" class="btn btn-primary" id="btnStartNewSubjectFromHome">
                            Nieuw onderwerp aanmelden
                        </button>
                    </div>

                    <div class="card">
                        <h3>Termijnagenda</h3>
                        <p>Bekijk alle vergaderingen en de daarbij behorende onderwerpen op de termijnagenda.</p>
                        <button type="button" class="btn btn-secondary" id="btnOpenTermijnagendaFromHome">
                            Bekijk termijnagenda
                        </button>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Eerstvolgende PO Water</h3>
                        <p>Bekijk en beheer de agenda van het eerstvolgende formele of informele PO Water.</p>
                        <div class="inline-button-group">
                            <button type="button" class="btn btn-secondary" id="btnOpenFirstFormeelFromHome">
                                Agenda eerstvolgend formeel
                            </button>
                            <button type="button" class="btn btn-secondary" id="btnOpenFirstInformeelFromHome">
                                Agenda eerstvolgend informeel
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Rollen en rechten</h3>
                        <ul class="role-list">
                            <li><strong>Indiener</strong> — Onderwerpen aanmelden en eigen onderwerpen inzien/intrekken.</li>
                            <li><strong>Programmacoördinator</strong> — Volledig beheer van termijnagenda en PO-agenda.</li>
                            <li><strong>Assistent</strong> — Gelijke rechten als programmacoördinator + PO-kalender beheer.</li>
                            <li><strong>Kijker</strong> — Alleen leesrechten.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- VIEW: Onderwerp (Wizard) -->
            <section id="view-onderwerp" class="app-view">
                <div class="card">
                    <h2>Onderwerp aanmelden</h2>
                    <p>Volg onderstaande stappen om een onderwerp voor PO Water aan te melden.</p>

                    <!-- Wizard stapindicator -->
                    <div class="wizard-steps">
                        <div class="wizard-step wizard-step-active" data-step="1">
                            <div class="wizard-step-number">1</div>
                            <div class="wizard-step-label">Agendawijzer</div>
                        </div>
                        <div class="wizard-step" data-step="2">
                            <div class="wizard-step-number">2</div>
                            <div class="wizard-step-label">Onderwerp</div>
                        </div>
                        <div class="wizard-step" data-step="3">
                            <div class="wizard-step-number">3</div>
                            <div class="wizard-step-label">Keuze vergadering</div>
                        </div>
                    </div>

                    <!-- Wizard inhoud -->
                    <div class="wizard-panels">

                        <!-- Stap 1: Agendawijzer -->
                        <div id="wizard-step-1" class="wizard-panel wizard-panel-active">
                            <h3>Stap 1 — Agendawijzer</h3>
                            <p>Beantwoord de onderstaande vragen om te bepalen of het onderwerp thuishoort in PO Water.</p>

                            <form id="formAgendawijzer">
                                <div class="form-group">
                                    <label>Vraag 1</label>
                                    <p class="help-text">Beschrijving van vraag 1 volgens specificatie.</p>
                                    <div class="radio-group">
                                        <label><input type="radio" name="vraag1" value="ja" /> Ja</label>
                                        <label><input type="radio" name="vraag1" value="nee" /> Nee</label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Vraag 2</label>
                                    <p class="help-text">Beschrijving van vraag 2 volgens specificatie.</p>
                                    <div class="radio-group">
                                        <label><input type="radio" name="vraag2" value="ja" /> Ja</label>
                                        <label><input type="radio" name="vraag2" value="nee" /> Nee</label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Vraag 3</label>
                                    <p class="help-text">Beschrijving van vraag 3 volgens specificatie.</p>
                                    <div class="radio-group">
                                        <label><input type="radio" name="vraag3" value="ja" /> Ja</label>
                                        <label><input type="radio" name="vraag3" value="nee" /> Nee</label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Vraag 4</label>
                                    <p class="help-text">Beschrijving van vraag 4 volgens specificatie.</p>
                                    <div class="radio-group">
                                        <label><input type="radio" name="vraag4" value="ja" /> Ja</label>
                                        <label><input type="radio" name="vraag4" value="nee" /> Nee</label>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Vraag 5</label>
                                    <p class="help-text">Beschrijving van vraag 5 volgens specificatie.</p>
                                    <div class="radio-group">
                                        <label><input type="radio" name="vraag5" value="ja" /> Ja</label>
                                        <label><input type="radio" name="vraag5" value="nee" /> Nee</label>
                                    </div>
                                </div>
                            </form>

                            <div class="wizard-footer">
                                <div id="agendawijzerResult" class="agendawijzer-result"></div>
                                <div class="wizard-buttons">
                                    <button type="button" class="btn btn-primary" id="btnWizardToStep2">
                                        Volgende
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Stap 2: Onderwerpgegevens -->
                        <div id="wizard-step-2" class="wizard-panel">
                            <h3>Stap 2 — Onderwerpgegevens</h3>

                            <form id="formOnderwerp">
                                <div class="grid-2">
                                    <div class="form-group">
                                        <label for="fldNaamIndiener">Naam indiener *</label>
                                        <input type="text" id="fldNaamIndiener" name="NaamIndiener" class="form-control" />
                                    </div>
                                    <div class="form-group">
                                        <label for="fldAfdelingIndiener">Afdeling indiener</label>
                                        <input type="text" id="fldAfdelingIndiener" name="AfdelingIndiener" class="form-control" />
                                    </div>
                                </div>

                                <div class="grid-2">
                                    <div class="form-group">
                                        <label for="fldNaamOpdrachtgever">Naam opdrachtgever</label>
                                        <input type="text" id="fldNaamOpdrachtgever" name="NaamOpdrachtgever" class="form-control" />
                                    </div>
                                    <div class="form-group">
                                        <label for="fldDomein">Domein</label>
                                        <select id="fldDomein" name="Domein" class="form-control">
                                            <option value="">Maak een keuze</option>
                                            <option value="Watersysteem">Watersysteem</option>
                                            <option value="Waterketen">Waterketen</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="fldBetrokkenAfdelingen">Betrokken afdelingen</label>
                                    <textarea id="fldBetrokkenAfdelingen" name="BetrokkenAfdelingen" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="fldTitel">Titel *</label>
                                    <input type="text" id="fldTitel" name="Titel" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="fldToelichting">Toelichting *</label>
                                    <textarea id="fldToelichting" name="Toelichting" class="form-control" rows="4"></textarea>
                                </div>
                            </form>

                            <div class="wizard-footer">
                                <div class="wizard-buttons">
                                    <button type="button" class="btn btn-secondary" id="btnWizardBackToStep1">
                                        Vorige
                                    </button>
                                    <button type="button" class="btn btn-primary" id="btnWizardToStep3">
                                        Volgende
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Stap 3: Keuze vergadering -->
                        <div id="wizard-step-3" class="wizard-panel">
                            <h3>Stap 3 — Keuze vergadering</h3>
                            <p>Kies het PO Water-overleg waarvoor u dit onderwerp wilt aanmelden.</p>

                            <form id="formVergaderKeuze">
                                <div class="form-group">
                                    <label for="fldVergaderType">Type overleg</label>
                                    <select id="fldVergaderType" name="VergaderType" class="form-control">
                                        <option value="">Alle typen</option>
                                        <option value="Formeel">Formeel</option>
                                        <option value="Informeel">Informeel</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="fldGewensteVergadering">Gewenste overlegdatum *</label>
                                    <select id="fldGewensteVergadering" name="GewensteVergaderingId" class="form-control">
                                        <option value="">(laden van vergaderingen...)</option>
                                    </select>
                                </div>
                            </form>

                            <div class="wizard-summary" id="wizardSummaryBox">
                                <!-- Hier toont app.js een samenvatting van onderwerp + gekozen vergadering -->
                            </div>

                            <div class="wizard-footer">
                                <div id="wizardErrorBox" class="wizard-error-box"></div>
                                <div class="wizard-buttons">
                                    <button type="button" class="btn btn-secondary" id="btnWizardBackToStep2">
                                        Vorige
                                    </button>
                                    <button type="button" class="btn btn-primary" id="btnWizardSubmit">
                                        Verzenden
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div> <!-- wizard-panels -->
                </div>
            </section>

            <!-- VIEW: Termijnagenda -->
            <section id="view-termijnagenda" class="app-view">
                <div class="card">
                    <h2>Termijnagenda PO Water</h2>
                    <p>Overzicht van alle vergaderingen en de gekoppelde onderwerpen.</p>

                    <div id="termijnagendaContainer">
                        <!-- app.js rendert hier de termijnagenda (vergaderingen + onderwerpen) -->
                    </div>
                </div>
            </section>

            <!-- VIEW: Formeel -->
            <section id="view-formeel" class="app-view">
                <div class="card">
                    <h2>Formele PO Water-agenda</h2>
                    <p>Overzicht van formele PO Water-vergaderingen en onderwerpen.</p>
                    <div id="formeleAgendaContainer">
                        <!-- app.js rendert hier de formele agenda's met drag-and-drop ondersteuning -->
                    </div>
                </div>
            </section>

            <!-- VIEW: Informeel -->
            <section id="view-informeel" class="app-view">
                <div class="card">
                    <h2>Informele PO Water-agenda</h2>
                    <p>Overzicht van informele PO Water-vergaderingen en onderwerpen.</p>
                    <div id="informeleAgendaContainer">
                        <!-- app.js rendert hier de informele agenda's met drag-and-drop ondersteuning -->
                    </div>
                </div>
            </section>

            <!-- VIEW: Beheer -->
            <section id="view-beheer" class="app-view">
                <div class="card">
                    <h2>Beheer</h2>
                    <p>
                        Deze sectie is bedoeld voor programmacoördinator en assistent. De daadwerkelijke autorisatie
                        wordt afgedwongen via SharePoint-rechten; onderstaande beheerfuncties zijn een extra laag in de UI.
                    </p>

                    <!-- Subtabs voor beheer -->
                    <div class="subnav">
                        <button type="button" class="subnav-tab subnav-tab-active" data-subview="beheer-vergaderingen">
                            Vergaderingen beheren
                        </button>
                        <button type="button" class="subnav-tab" data-subview="beheer-onderwerpen">
                            Onderwerpen beheren
                        </button>
                    </div>

                    <!-- Beheer: Vergaderingen -->
                    <div id="beheer-vergaderingen" class="beheer-subview beheer-subview-active">
                        <div class="toolbar">
                            <button type="button" class="btn btn-primary" id="btnBeheerNieuweVergadering">
                                Nieuwe vergadering
                            </button>
                        </div>

                        <div id="beheerVergaderingenTabelContainer">
                            <!-- app.js rendert hier een tabel met vergaderingen (CRUD-acties via vergaderingenApi) -->
                        </div>
                    </div>

                    <!-- Beheer: Onderwerpen -->
                    <div id="beheer-onderwerpen" class="beheer-subview">
                        <div id="beheerOnderwerpenTabelContainer">
                            <!-- app.js rendert hier een tabel met onderwerpen (filter/bewerken volgens rol) -->
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>
</body>
</html>
