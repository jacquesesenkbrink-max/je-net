<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>De Innerlijke Reis: Van Weten naar Kennen</title>
    <style>
        :root {
            --primary: #4a5d4e; /* Aarthy Green */
            --accent: #d4a373; /* Soft Gold/Paper */
            --bg-overlay: rgba(0, 0, 0, 0.6);
            --text-light: #fefefe;
            --text-dark: #333;
            --font-serif: 'Georgia', serif;
            --font-sans: 'Helvetica Neue', sans-serif;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: var(--font-sans);
            color: var(--text-dark);
            overflow-x: hidden;
        }

        /* --- SCREEN STYLES --- */

        /* Dynamic Background */
        #background {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            z-index: -1;
            transition: background-image 1s ease-in-out;
        }
        #overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-overlay);
            z-index: -1;
            backdrop-filter: blur(4px);
        }

        /* Layout */
        .container {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            min-height: 90vh;
        }

        /* Navigation */
        .nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: var(--text-light);
            flex-wrap: wrap;
            gap: 15px;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
        }
        
        .nav-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-selector {
            background: rgba(255,255,255,0.9);
            border: 1px solid rgba(255,255,255,0.4);
            color: #333;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            max-width: 150px;
        }
        
        .btn-today {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        .btn-today:hover {
            background-color: #bfa060;
        }

        /* Main Card */
        .card {
            background: rgba(255, 255, 255, 0.96);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            margin-bottom: 40px;
        }

        h1 {
            font-family: var(--font-serif);
            color: var(--primary);
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0;
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            display: inline-block;
        }

        .quote-box {
            font-family: var(--font-serif);
            font-size: 1.3rem;
            font-style: italic;
            line-height: 1.6;
            color: #2c3e50;
            margin: 30px 0;
            position: relative;
            padding-left: 20px;
        }
        .quote-box::before {
            content: "‚Äú";
            font-size: 5rem;
            color: var(--accent);
            position: absolute;
            top: -40px;
            left: -15px;
            opacity: 0.3;
        }

        .exercise-box {
            background-color: #f4f7f6;
            border-left: 5px solid var(--primary);
            padding: 25px;
            margin: 30px 0;
            border-radius: 0 8px 8px 0;
        }
        .exercise-title {
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        /* Reflection Area */
        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-family: var(--font-serif);
            font-size: 1rem;
            resize: vertical;
            margin-top: 10px;
            box-sizing: border-box;
            transition: border 0.3s, box-shadow 0.3s;
            background: #fffdf9;
        }
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 8px rgba(74, 93, 78, 0.2);
        }

        /* Buttons */
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            border-radius: 30px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s, transform 0.2s;
            display: inline-block;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn:hover {
            background-color: #3a4b3e;
            transform: translateY(-2px);
        }
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            box-shadow: none;
        }
        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
        
        .action-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        /* Reward Section */
        #reward-section {
            margin-top: 40px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
            display: none;
            text-align: center;
            background: #fafafa;
            padding: 20px;
            border-radius: 10px;
            border: 1px dashed var(--accent);
        }
        #reward-section.visible {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        .reward-content {
            font-family: var(--font-serif);
            color: var(--accent);
            font-size: 1.3rem;
            font-weight: bold;
            line-height: 1.4;
        }
        .reward-sub {
            font-size: 0.85rem;
            color: #888;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* --- PRINT STYLES --- */
        #print-container { display: none; }

        @media print {
            @page { margin: 2cm; }
            body { background: white; color: black; margin: 0; padding: 0; font-size: 12pt; }
            #background, #overlay, .nav-bar, .btn, select, .day-nav-buttons, .card, .action-bar, button { display: none !important; }
            .container { display: none !important; }

            #print-container { 
                display: block !important; 
                width: 100%;
                max-width: 100%;
            }
            
            /* Cover Page */
            .print-cover {
                height: 90vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                text-align: center;
                page-break-after: always;
            }
            .print-cover h1 {
                font-size: 3rem;
                color: var(--primary);
                border-bottom: 4px solid var(--accent);
                margin-bottom: 20px;
            }
            .print-cover p {
                font-size: 1.5rem;
                color: #555;
            }

            /* Daily Entries */
            .print-entry {
                page-break-inside: avoid;
                margin-bottom: 30px;
                border: 1px solid #ddd;
                padding: 20px;
                border-radius: 8px;
            }
            
            .print-header {
                display: flex;
                justify-content: space-between;
                border-bottom: 2px solid var(--accent);
                padding-bottom: 5px;
                margin-bottom: 15px;
                align-items: baseline;
            }
            
            .print-day-num { font-weight: bold; font-size: 1.2rem; color: var(--primary); }
            .print-title { font-weight: bold; font-size: 1.2rem; }

            .print-quote { 
                font-style: italic; 
                color: #444; 
                margin: 10px 0 15px 0; 
                font-family: var(--font-serif); 
                border-left: 3px solid #eee;
                padding-left: 15px;
            }

            .print-exercise {
                font-size: 1rem;
                margin-bottom: 15px;
                background: #f9f9f9;
                padding: 10px;
                border-radius: 5px;
            }

            .print-reflection-box { 
                font-family: 'Courier New', monospace; 
                white-space: pre-wrap; 
                margin-top: 10px; 
                background: #fff;
                padding: 10px;
                border: 1px solid #eee;
            }

            .print-reward {
                margin-top: 15px;
                text-align: right;
                font-style: italic;
                font-size: 0.9em;
                color: var(--primary);
                font-weight: bold;
            }

            .dotted-lines {
                background-image: repeating-linear-gradient(transparent, transparent 29px, #ccc 30px);
                background-size: 100% 30px;
                height: 150px;
                width: 100%;
                display: block;
                margin-top: 20px;
                border: 1px solid #eee;
            }
        }
    </style>
</head>
<body>

    <div id="background" style="background-image: url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');"></div>
    <div id="overlay"></div>

    <div class="container">
        <div class="nav-bar">
            <span style="font-size: 1.4rem; font-weight: bold; letter-spacing: 1px;">De Innerlijke Reis</span>
            <div class="nav-controls">
                <button onclick="goToToday()" class="btn-today">üìÖ Vandaag</button>
                <div style="display:flex; align-items: center; gap: 5px;">
                    <select id="daySelect" class="day-selector" onchange="loadDay(this.value)">
                        </select>
                </div>
            </div>
        </div>

        <div class="card" id="main-card">
            <h1 id="day-title">Dag 1: Laden...</h1>
            
            <div class="quote-box" id="day-quote">
                ...
            </div>

            <div class="exercise-box">
                <div class="exercise-title">Vandaag Doen:</div>
                <div id="day-exercise">
                    ...
                </div>
            </div>

            <p style="font-size: 1.1rem; margin-top: 30px;"><strong>Avondreflectie:</strong> <br><small style="color:#666;">Wat kwam er vandaag in je op toen je de oefening deed? Wat fluisterde je hart?</small></p>
            <textarea id="reflection-input" placeholder="Schrijf hier je gedachten..."></textarea>

            <div class="action-bar">
                <button class="btn" onclick="saveAndReveal()">üíæ Opslaan & Inzicht</button>
                <div class="day-nav-buttons">
                    <button class="btn btn-outline" style="padding: 10px 20px;" onclick="changeDay(-1)">‚Üê Vorige</button>
                    <button class="btn btn-outline" style="padding: 10px 20px;" onclick="changeDay(1)">Volgende ‚Üí</button>
                </div>
            </div>

            <div id="reward-section">
                <div class="reward-content" id="day-reward"></div>
                <div class="reward-sub">Meegever voor de nacht</div>
            </div>
        </div>

        <div style="text-align: center; margin-bottom: 40px;">
            <button class="btn btn-outline" style="border-color: rgba(255,255,255,0.6); color: white; background: rgba(0,0,0,0.2);" onclick="printBooklet()">üñ®Ô∏è Print mijn volledige logboek</button>
        </div>
    </div>

    <div id="print-container"></div>

    <script>
        // DATA: Cleaned up JSON
        const journeyData = [
            { day: 1, title: "De Mismatch", quote: "Ons stresssysteem is gebouwd voor acute, fysieke bedreigingen, niet voor de chronische psychologische belasting van vandaag.", exercise: "Observeer vandaag je 'alarmbellen'. Wanneer voel je stress? Is er een tijger in de kamer, of is het een e-mail? Benoem het verschil hardop.", reward: "We zijn niet gebouwd voor de wereld die we gebouwd hebben. Wees zacht voor je oude brein." },
            { day: 2, title: "Illusie van Controle", quote: "Als reactie op de onzekerheid jagen we wat tastbaar is na: bezit, status en kennis. Maar alles is vluchtig en het najagen van wind.", exercise: "Kies √©√©n klein ding dat je vandaag niet probeert te controleren. Laat de afwas staan, of laat een discussie gaan zonder jouw 'gelijk' te halen.", reward: "Vrede begint waar de behoefte aan controle eindigt." },
            { day: 3, title: "De Eerste Wachter: Het Ego", quote: "De beschermer die ons zelfbeeld bewaakt, is een gevangenis geworden. Het blokkeert kwetsbaarheid, groei en echte verbinding.", exercise: "Let op wanneer je jezelf verdedigt vandaag ('Ja, maar ik bedoelde...'). Stop de zin. Adem in. Zeg simpelweg: 'Je hebt een punt'.", reward: "Het ego schreeuwt om gelijk, de ziel fluistert om verbinding." },
            { day: 4, title: "Weten vs. Kennen", quote: "Weten analyseert, verklaart en beheerst (extern). Kennen ervaart, vertrouwt en draagt (intern).", exercise: "Probeer vandaag iets niet te 'googelen' of direct te verklaren. Kijk naar een wolk, een bloem of een situatie en 'laat het er gewoon zijn'.", reward: "Wie kennis vermeerdert, vermeerdert smart. Wie wijsheid zoekt, vindt rust." },
            { day: 5, title: "De Kloof", quote: "Het probleem is niet een tekort aan kennis, maar een tekort aan wil en innerlijke transformatie.", exercise: "Kies √©√©n ding waarvan je al maanden WEET dat je het moet doen, maar niet DOET. Doe het vandaag 5 minuten. Slechts 5 minuten.", reward: "De kleinste daad van gehoorzaamheid is krachtiger dan de grootste theorie over verandering." },
            { day: 6, title: "De Strijd", quote: "Want het goede dat ik wil, doe ik niet, maar het kwade, dat ik niet wil, dat doe ik.", exercise: "Veroordeel jezelf niet als je vandaag faalt. Zie je falen niet als een bewijs van zwakte, maar als een uitnodiging tot genade.", reward: "Je bent niet perfect. En dat is precies waar het Licht naar binnen kan." },
            { day: 7, title: "Van Hoofd naar Hart", quote: "De spirituele weg nodigt uit tot kennen: een dieper, relationeel begrip dat ontstaat uit doorleefde ervaring.", exercise: "Leg je hand op je hart wanneer je stress voelt opkomen in je hoofd. Zak met je aandacht naar die hand.", reward: "Het hoofd zoekt antwoorden, het hart zoekt aanwezigheid." },
            { day: 8, title: "De Taal van Paradox", quote: "De diepste waarheden openbaren zich vaak in een spanningsveld. Waar geen paradox is, is geen ruimte voor overgave.", exercise: "Omarm vandaag een tegenstelling. Kun je tegelijkertijd verdrietig √©n dankbaar zijn? Probeer beide gevoelens ruimte te geven.", reward: "In het midden van de spanning woont de Waarheid." },
            { day: 9, title: "Kracht in Zwakheid", quote: "De weg vooruit vereist het omarmen van schijnbare tegenstellingen: Kracht in Zwakheid.", exercise: "Deel vandaag iets met iemand wat niet zo goed ging. Toon je zwakte in plaats van je Instagram-perfectie.", reward: "Je littekens zijn de plek waar anderen zich met jou kunnen verbinden." },
            { day: 10, title: "Het Niet-Weten", quote: "Wijsheid groeit door het 'Niet-Weten' te omarmen.", exercise: "Als iemand je iets vraagt wat je niet weet, verzin geen antwoord. Zeg volmondig: 'Ik weet het niet, en dat is ok√©.'", reward: "Ruimte ontstaat pas als we stoppen die te vullen met onze eigen woorden." },
            { day: 11, title: "Vrijheid en Het Kwaad", quote: "Liefde die gedwongen is, is geen liefde. Vrijheid is de voorwaarde voor een oprechte relatie.", exercise: "Geef iemand vandaag de ruimte om 'nee' tegen je te zeggen zonder dat je boos wordt. Respecteer hun vrijheid volledig.", reward: "Liefde laat los, angst houdt vast." },
            { day: 12, title: "Relatie boven Controle", quote: "Gods almacht toont zich niet in het vernietigen van buitenaf, maar in het dragen en transformeren van binnenuit.", exercise: "Probeer een moeilijke situatie vandaag niet 'op te lossen' (buitenaf), maar vraag jezelf af: hoe kan ik hierin aanwezig blijven (binnenuit)?", reward: "Hij kiest voor relatie boven controle. Doe jij dat ook?" },
            { day: 13, title: "Saul vs. David", quote: "Saul zocht controle en zelfrechtvaardiging. David zocht voortdurend de relatie, ondanks zijn fouten.", exercise: "Wees vandaag een David. Als je een fout maakt, verstop het niet. Breng het in het licht.", reward: "God kijkt niet naar je prestaties, maar naar de ori√´ntatie van je hart." },
            { day: 14, title: "De Graankorrel", quote: "Als de graankorrel niet in de aarde valt en sterft, blijft hij alleen.", exercise: "Wat mag er in jou 'sterven' vandaag? Is het je trots? Je ongeduld? Laat het vallen in de aarde.", reward: "Leven door te sterven. Het is de natuurwet van het Koninkrijk." },
            { day: 15, title: "Vrucht door Worsteling", quote: "Echte vrucht wordt geboren door trouw in de worsteling, en doorgaan waar opgeven logisch lijkt.", exercise: "Doe vandaag dat ene taaie klusje met volle aandacht, zonder te klagen. Zie de weerstand als groeipijn.", reward: "Zonder wrijving geen glans." },
            { day: 16, title: "Comfort is de Vijand", quote: "Comfort is de vijand van karakter.", exercise: "Kies vandaag bewust voor ongemak. Sta vroeger op, douch koud, of zwijg wanneer je wilt spreken.", reward: "Gemak maakt zwak. Weerstand vormt de ziel." },
            { day: 17, title: "Bron van Waarde", quote: "De ultieme bevrijding is de verschuiving van je bron van waarde: niet wat je doet, maar wie je bent in verbondenheid.", exercise: "Schrijf op een briefje: 'Ik ben genoeg, niet om wat ik doe, maar om wie ik ben'. Leg het op je bureau.", reward: "Je hoeft je bestaansrecht niet te verdienen. Je hebt het al." },
            { day: 18, title: "Angst vs. Liefde", quote: "Jezus demonstreerde handelen vanuit liefde, niet vanuit de angst om iets te verliezen.", exercise: "Betrap jezelf op een beslissing uit angst (FOMO, angst voor afwijzing). Draai hem om: wat zou Liefde nu doen?", reward: "Perfecte liefde drijft de angst uit." },
            { day: 19, title: "Ritme van Liefde", quote: "1. God liefhebben. 2. Jezelf liefhebben. 3. De ander liefhebben.", exercise: "Heb je jezelf vandaag al liefgehad? Neem 10 minuten pauze puur voor jezelf, zonder schuldgevoel.", reward: "Je kunt niet schenken uit een lege beker." },
            { day: 20, title: "Geven uit Overvloed", quote: "Geven vanuit overvloed, niet uit plicht of angst.", exercise: "Geef vandaag een compliment of een klein cadeau aan iemand, puur omdat je het wilt, niet omdat het 'hoort'.", reward: "Plicht put uit. Liefde laadt op." },
            { day: 21, title: "Wandelen", quote: "De conclusie van de innerlijke reis is geen bestemming, maar een houding: Wandelen.", exercise: "Ga wandelen. Letterlijk. Let niet op de bestemming, maar op de stappen zelf.", reward: "Haast je langzaam." },
            { day: 22, title: "Niet Stilstaan", quote: "Wandelen is niet stilstaan uit angst om te behouden wat je hebt.", exercise: "Gooi vandaag iets weg wat je bewaart 'voor het geval dat'. Vertrouw erop dat je genoeg zult hebben.", reward: "Klamp je niet vast. Open handen kunnen meer ontvangen." },
            { day: 23, title: "Niet Rennen", quote: "Wandelen is niet rennen uit angst om iets te missen.", exercise: "Vertraag. Loop langzamer, eet langzamer, praat langzamer vandaag.", reward: "God wandelt in de avondkoelte. Hij rent niet." },
            { day: 24, title: "Dagelijkse Trouw", quote: "Maar in een ritme van dagelijkse trouw, stap voor stap, vooruit bewegen.", exercise: "Focus vandaag alleen op VANDAAG. Morgen bestaat nog niet. Wat is de enige stap die je nu moet zetten?", reward: "Wie trouw is in het kleine, wordt veel toevertrouwd." },
            { day: 25, title: "Vrijheid om te Vertrouwen", quote: "Het is de praktische overgang van de noodzaak om alles te verklaren naar de vrijheid om te vertrouwen.", exercise: "Zeg vandaag tegen een situatie die je niet snapt: 'Ik vertrouw erop dat dit ergens goed voor is'.", reward: "Vertrouwen is het oog van het hart." },
            { day: 26, title: "Ankers: Geloof", quote: "Vertrouwen (Geloof) reguleert ons zenuwstelsel. Het is een biologische noodzakelijkheid.", exercise: "Doe een ademhalingsoefening: 4 tellen in, 4 vast, 4 uit. Voel hoe geloof ook fysieke rust kan zijn.", reward: "Je lichaam weet wanneer je ziel vertrouwt." },
            { day: 27, title: "Ankers: Hoop", quote: "Een betekenisvolle toekomst (Hoop) is een existenti√´le motor die beschermt tegen instorting.", exercise: "Schrijf √©√©n ding op waar je naar uitkijkt, hoe klein ook. Visualiseer het.", reward: "Hoop is het anker van de ziel." },
            { day: 28, title: "Ankers: Liefde", quote: "Veilige verbinding (Liefde) is het klimaat waarin de mens heelt en groeit.", exercise: "Cre√´er vandaag een veilig moment voor iemand anders. Luister zonder oordeel.", reward: "Waar liefde is, kan angst niet overleven." },
            { day: 29, title: "Zoek Eerst", quote: "Zoek eerst het Koninkrijk van God en Zijn gerechtigheid...", exercise: "Begin je dag (of dit moment) met de vraag: 'Wat is nu belangrijk voor het Koninkrijk?' in plaats van 'Wat is goed voor mijn portemonnee/ego?'", reward: "De prioriteit van je hart bepaalt de kwaliteit van je leven." },
            { day: 30, title: "De Uitnodiging", quote: "De reis eindigt niet. Hij begint.", exercise: "Kijk terug op de afgelopen maand. Zie je een lijn? Geen eindpunt, maar een startlijn?", reward: "Elk einde is een nieuw begin." },
            { day: 31, title: "En Wandel", quote: "...en wandel.", exercise: "De oefening voor vandaag en de rest van je leven: Zet √©√©n voet voor de andere. Blijf bewegen. Blijf vertrouwen.", reward: "Je hoeft de weg niet te kennen om hem te gaan. De Gids gaat mee." }
        ];

        // LOGIC
        let currentDay = 1;
        const totalDays = journeyData.length;

        function init() {
            renderDropdown();

            // Check LocalStorage for saved progress
            const savedDay = localStorage.getItem('currentDay');
            if (savedDay) {
                currentDay = parseInt(savedDay);
            }
            // Ensure select value is correct
            document.getElementById('daySelect').value = currentDay;
            loadDay(currentDay);
        }

        function renderDropdown() {
             const select = document.getElementById('daySelect');
             select.innerHTML = '';
             journeyData.forEach(d => {
                let opt = document.createElement('option');
                opt.value = d.day;
                
                // Check if this day has a reflection saved
                const hasData = localStorage.getItem(`reflection_day_${d.day}`) && localStorage.getItem(`reflection_day_${d.day}`).length > 1;
                const mark = hasData ? '‚úÖ ' : '';
                
                opt.innerHTML = `${mark}Dag ${d.day}`;
                select.appendChild(opt);
            });
        }

        function goToToday() {
            const todayDate = new Date().getDate();
            if (todayDate <= 31) {
                loadDay(todayDate);
            } else {
                loadDay(1);
            }
        }

        function loadDay(day) {
            currentDay = parseInt(day);
            localStorage.setItem('currentDay', currentDay);
            document.getElementById('daySelect').value = currentDay;
            
            const data = journeyData.find(d => d.day === currentDay);
            
            if (!data) return;

            // Update UI
            document.getElementById('day-title').innerText = `Dag ${data.day}: ${data.title}`;
            document.getElementById('day-quote').innerText = data.quote;
            document.getElementById('day-exercise').innerText = data.exercise;
            document.getElementById('day-reward').innerText = data.reward;
            
            // Image Logic (Cycle through 7 high-quality images)
            const images = [
                "1470071459604-3b5ec3a7fe05", // Foggy forest
                "1502082553048-f009c371b9b5", // Leaves
                "1465146344425-f00d5f5c8f07", // Dark forest
                "1470252649378-9c29740c9fa8", // Morning light
                "1426604966848-d7adac402bff", // Mist
                "1518173946633-4c66e6732640", // Hands
                "1504193556277-c37651a5113d"  // Path
            ];
            const imgId = images[(currentDay - 1) % images.length];
            document.getElementById('background').style.backgroundImage = `url('https://images.unsplash.com/photo-${imgId}?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80')`;

            // Load saved reflection
            const savedReflection = localStorage.getItem(`reflection_day_${currentDay}`);
            const textArea = document.getElementById('reflection-input');
            textArea.value = savedReflection || "";
            
            // Reset Reward View Logic
            const rewardSection = document.getElementById('reward-section');
            if (savedReflection && savedReflection.length > 5) {
                rewardSection.classList.add('visible');
            } else {
                rewardSection.classList.remove('visible');
            }
        }

        function changeDay(delta) {
            let newDay = currentDay + delta;
            if (newDay < 1) newDay = 1;
            if (newDay > totalDays) newDay = totalDays;
            loadDay(newDay);
        }

        function saveAndReveal() {
            const text = document.getElementById('reflection-input').value;
            if (text.trim() === "") {
                alert("Schrijf eerst een korte reflectie om je inzicht te ontvangen.");
                return;
            }
            localStorage.setItem(`reflection_day_${currentDay}`, text);
            document.getElementById('reward-section').classList.add('visible');
            
            // Update dropdown to show checkmark
            renderDropdown();
            document.getElementById('daySelect').value = currentDay;

            // Scroll to reward
            document.getElementById('reward-section').scrollIntoView({behavior: "smooth"});
        }

        function printBooklet() {
            const container = document.getElementById('print-container');
            container.innerHTML = ""; // Clear previous content
            
            // Cover Page
            const cover = document.createElement('div');
            cover.className = 'print-cover';
            cover.innerHTML = `
                <h1>Mijn Innerlijke Reis</h1>
                <p>Van Weten naar Kennen</p>
                <p style="font-size: 1rem; margin-top: 50px;">Logboek & Reflecties</p>
                <p style="font-size: 0.8rem; margin-top: 10px; color: #999;">Geprint op: ${new Date().toLocaleDateString()}</p>
            `;
            container.appendChild(cover);

            // Entries
            journeyData.forEach(d => {
                const savedRef = localStorage.getItem(`reflection_day_${d.day}`);
                const hasEntry = savedRef && savedRef.trim().length > 0;

                const entry = document.createElement('div');
                entry.className = 'print-entry';
                
                let reflectionHtml = '';
                if (hasEntry) {
                    reflectionHtml = `<div class="print-reflection-box">${savedRef}</div>`;
                } else {
                    reflectionHtml = `<div class="dotted-lines"></div>`;
                }

                entry.innerHTML = `
                    <div class="print-header">
                        <span class="print-day-num">Dag ${d.day}</span>
                        <span class="print-title">${d.title}</span>
                    </div>
                    <div class="print-quote">"${d.quote}"</div>
                    <div class="print-exercise"><strong>Oefening:</strong> ${d.exercise}</div>
                    
                    <div style="font-size: 0.9em; font-weight: bold; margin-bottom: 5px;">Mijn Reflectie:</div>
                    ${reflectionHtml}
                    
                    <div class="print-reward">Inzicht: "${d.reward}"</div>
                `;
                container.appendChild(entry);
            });

            // Trigger print
            window.print();
        }

        // Initialize on load
        init();

    </script>
</body>
</html>